#### Core concepts of Elasticsearch
Relational databases have concepts such as rows, columns, tables, and schemas.
Elasticsearch and other document-oriented stores are based on different abstractions.
Elasticsearch is a document-oriented store. JSON documents are first-class citizens in
Elasticsearch. These JSON documents are organized within different types and indexes. 
1. Indexes
1. Types
1. Documents
1. Clusters
1. Nodes
1. Shards and replicas
1. Mappings and types
1. Inverted indexes

Paste the code below on editor pane
```json
PUT /catalog/_doc/1
{ "sku": "SP000001",
"title": "Elasticsearch for Hadoop", 
"description": "Elasticsearch for Hadoop", 
"author": "Vishal Shukla", 
"ISBN": "1785288997", 
"price": 26.99}
```
```json
PUT /catalog/_doc/2
{
 "sku": "SP000002",
 "title": "Google Pixel Phone 32GB - 5 inch display",
 "description": "Google Pixel Phone 32GB - 5 inch display (Factory
Unlocked US Version)",
 "price": 400.00,
 "resolution": "1440 x 2560 pixels",
 "os": "Android 7.1"
}
```
```
GET /catalog/_mapping
```
Output from the result pane
```
{
  "_index" : "catalog",
  "_type" : "_doc",
  "_id" : "1",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 0,
  "_primary_term" : 1
}
```
```json
{
  "catalog" : {
    "mappings" : {
      "properties" : {
        "ISBN" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "author" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "description" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "os" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "price" : {
          "type" : "float"
        },
        "resolution" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "sku" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        },
        "title" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        }
      }
    }
  }
}
```

PUT is the `HTTP method` that's used to index a new document. catalog is the `name of the index`, _doc is `the name of the type` where the document will be indexed (more on this later

Elasticsearch maintains internal metafields. These fields are as follows:
1. _id: This is the unique identifier of the document within the type, just like a
primary key in a database table. It can be autogenerated or specified by the user.
1. _type: This field contains the type of the document.
1. _index: This field contains the index name of the document
1. cluster : it hosts one or more indexes and is responsible for providing operations such as
searching, indexing, and aggregations. A cluster is formed by one or more nodes. Every
Elasticsearch node is always part of a cluster, even if it is just a single node cluster.
Shards and replicas
1.  Shard : Shards help in distributing an index over the cluster. Shards help in dividing the
documents of a single index over multiple nodes. There is a limit to the amount of data that
can be stored on a single node, and that limit is dictated by the storage, memory, and
processing capacities of that node. Shards help by splitting the data of a single index over
the cluster, and hence allowing the storage, memory, and processing capacities of the
cluster to be utilized.
1.  Elasticsearch are expected to run in spite of hardware failure.
This issue is addressed by replica shards or replicas. Each shard in an index can be
configured to have zero or more replica shards. Replica shards are extra copies of the
original or primary shard and provide a high availability of data.

#### Operations with Kibana console
**Indexing a document without providing an ID**
```json
POST /catalog/_doc
{
 "sku": "SP000003",
 "title": "Mastering Elasticsearch",
 "description": "Mastering Elasticsearch",
 "author": "Bharvi Dixit",
 "price": 54.99
}
```
Output:
```json
{
  "_index" : "catalog",
  "_type" : "_doc",
  "_id" : "mTTIk3sB8OutACr3nKZA",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 2,
  "_primary_term" : 1
}
```
 An id was generated, try looking for the id
 ```
 GET /catalog/_doc/mTTIk3sB8OutACr3nKZA
 ```
 Output
 ```
 {
  "_index" : "catalog",
  "_type" : "_doc",
  "_id" : "mTTIk3sB8OutACr3nKZA",
  "_version" : 1,
  "_seq_no" : 2,
  "_primary_term" : 1,
  "found" : true,
  "_source" : {
    "sku" : "SP000003",
    "title" : "Mastering Elasticsearch",
    "description" : "Mastering Elasticsearch",
    "author" : "Bharvi Dixit",
    "price" : 54.99
  }
}
```

### Update API
```json
POST /catalog/_update/1
{
 "doc": {
 "price": "28.99"
 }
}
```
```json
POST /catalog/_update/mTTIk3sB8OutACr3nKZA
{
 "script": {
 "source": "ctx._source.price += params.increment",
 "lang": "painless",
 "params": {
 "increment": 2
 }
 }
}
```
The price changes
```
 GET /catalog/_doc/mTTIk3sB8OutACr3nKZA
 ```
 Output
 ```json
 {
  "_index" : "catalog",
  "_type" : "_doc",
  "_id" : "mTTIk3sB8OutACr3nKZA",
  "_version" : 2,
  "_seq_no" : 4,
  "_primary_term" : 2,
  "found" : true,
  "_source" : {
    "sku" : "SP000003",
    "title" : "Mastering Elasticsearch",
    "description" : "Mastering Elasticsearch",
    "author" : "Bharvi Dixit",
    "price" : 56.99
  }
}

```


### Delete API
```
DELETE /catalog/_doc/mTTIk3sB8OutACr3nKZA
```



### Specifying the number of shards and replicas for an index
```json
PUT /catalog
{
 "settings": {
 "index": {
 "number_of_shards": 5,
 "number_of_replicas": 2
 }
 }
}
```

### Create type mapping in an existing index
```json
PUT /catalog/_mapping
{
 "properties": {
 "name": {
 "type": "text"
 }
 }
}
```
Output:
```
{
  "acknowledged" : true
}
```